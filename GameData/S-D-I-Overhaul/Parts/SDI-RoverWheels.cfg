+PART[wheelMed]:FINAL
{
    %name = SDI_wheelMed_switch
    %title = TR-2S "Stubby" Compact Vehicular Wheel
    %description = A rugged, compact off-road wheel for Kerbin's toughest terrain. Selectable performance modes allow tuning for everyday use or high-speed expeditions. Built by SheepDog Institute.
    %manufacturer = SheepDog Institute

    %TechRequired = stability
    %entryCost = 5000
    %cost = 500
    %category = Ground
    %subcategory = 0
    %bulkheadProfiles = srf
    %rescaleFactor = 0.5
    %scale = 0.5

    %mass = 0.0525

    @MODULE[ModuleWheelBase]
    {
        %radius = 0.29
        %mass = 0.02
        %FitWheelColliderToMesh = True
        %center = 0, -0.05, 0

        %frictionAdherent = 0.5
        %frictionPeak = 2.0
        %frictionLimit = 1.8
    }

    @MODULE[ModuleWheelSuspension]
    {
        %maximumLoad = 60
        %springRatio = 60
        %damperRatio = 2.0
    }

    MODULE
    {
        name = B9PartSwitch
        moduleID = performanceMode
        baseVariant = Standard
        switcherDescription = Performance Mode
        switchableModules = ModuleWheelMotor

        SUBTYPE
        {
            name = Standard
            title = Standard (30 mph / 1.25 EC)
            EXTRAINFO
            {
                info = Balanced performance for science and utility buggies.
            }

            MODULE
            {
                IDENTIFIER = ModuleWheelMotor
                wheelSpeedMax = 90
                RESOURCE[ElectricCharge]
                {
                    rate = 1.25
                }
                torqueCurve
                {
                    key = 0   4.0  0 0
                    key = 10  2.8  0 0
                    key = 52  0.75 0 0
                    key = 58  0    0 0
                }
            }
        }

        SUBTYPE
        {
            name = HighPerf
            title = High Performance (50 mph / 1.5 EC)
            EXTRAINFO
            {
                info = Optimized for speed and off-road racing.
            }

            MODULE
            {
                IDENTIFIER = ModuleWheelMotor
                wheelSpeedMax = 140
                RESOURCE[ElectricCharge]
                {
                    rate = 1.5
                }
                torqueCurve
                {
                    key = 0   5.2  0 0
                    key = 10  3.5  0 0
                    key = 52  1.0  0 0
                    key = 58  0    0 0
                }
            }
        }
    }

    @MODULE[ModuleWheelMotor]
    {
        %wheelSpeedMax = 90
        !torqueCurve {}
        torqueCurve
        {
            key = 0   4.0  0 0
            key = 10  2.8  0 0
            key = 52  0.75 0 0
            key = 58  0    0 0
        }
        @RESOURCE[ElectricCharge]
        {
            @rate = 1.25
        }
    }

    @MODULE[ModuleWheelBrakes]
    {
        @maxBrakeTorque = 4.5
    }
}
