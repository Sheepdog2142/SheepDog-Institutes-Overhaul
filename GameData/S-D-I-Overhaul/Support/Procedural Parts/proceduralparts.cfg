//
//ProceduralParts fixes
//
!PARTUPGRADE[ProceduralParts*] {}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = sd625
    cumulativeCost = true
    partIcon = proceduralTankLiquid
    techRequired = fabrication
    title = Procedural Tank (0.625)
    description = Procedural Tank Max diameter 0.625
    entryCost = 0
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = sd9375
    cumulativeCost = true
    partIcon = proceduralTankLiquid
    techRequired = earlyTanks
    title = Procedural Tank (0.9375)
    description = Procedural Tank Max diameter 0.9375
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = sd125
    partIcon = proceduralTankLiquid
    techRequired = basicTanks
    title = Procedural Tank (1.25)
    description = Procedural Tank Max diameter 1.25
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = sd1875
    partIcon = proceduralTankLiquid
    techRequired = generalTanks
    title = Procedural Tank (1.875)
    description = Procedural Tank Max diameter 1.875
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = sd25
    partIcon = proceduralTankLiquid
    techRequired = fuelSystems
    title = Procedural Tank (2.5)
    description = Procedural Tank max diameter is 2.5
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = sd375
    partIcon = proceduralTankLiquid
    techRequired = largeVolumeContainment
    title = Procedural Tank (3.75)
    description = Procedural Tank max diameter is 3.75
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = sd5
    partIcon = proceduralTankLiquid
    techRequired = highPerformanceFuelSystems
    title = Procedural Tank (5.0)
    description = Procedural Tank max diameter is 5.0
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = sd75
    partIcon = proceduralTankLiquid
    techRequired = specializedFuelStorage
    title = Procedural Tank (7.5)
    description = Procedural Tank max diameter is 7.5
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = sdu
    partIcon = proceduralTankLiquid
    techRequired = extremeFuelStorage
    title = Procedural Tank (Unlimited)
    description = Procedural Tank max diameter is unlimited
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = basicLifeSupport
    partIcon = proceduralTankOre
    techRequired = hydroponics
    title = Procedural Ore Tank
    description = Procedural Ore Tank
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = improvedLifeSupport
    partIcon = proceduralTankOre
    techRequired = logistics
    title = Procedural Ore Tank (Expanded)
    description = Procedural Ore Tank dimensions are increased
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = longTermLifeSupport
    partIcon = proceduralTankOre
    techRequired = longTermLifeSupport
    title = Procedural Ore Tank (Unlimited)
    description = Procedural Ore Tank dimensions are unlimited
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = electronicsSatellite
    partIcon = proceduralBattery
    techRequired = electrics
    title = Procedural Battery (small)
    description = Procedural Batteries small
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = electronicsHuman
    partIcon = proceduralBattery
    techRequired = advElectrics
    title = Procedural Battery (medium)
    description = Procedural Batteries medium
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = miniaturization
    partIcon = proceduralBattery
    techRequired = largeElectrics
    title = Procedural Battery (large)
    description = Procedural Batteries large
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = electronicsSpaceStation
    partIcon = proceduralBattery
    techRequired = specializedElectrics
    title = Procedural Battery (huge)
    description = Procedural Batteries huge
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = spaceStationSolarPanels
    partIcon = proceduralBattery
    techRequired = experimentalElectrics
    title = Procedural Battery (unlimited)
    description = Procedural Batteries unlimited
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = supersonicFlightadvConstruction
    partIcon = proceduralNoseCone
    techRequired = aviation
    title = Procedural NoseCone (small)
    description = Procedural NoseCone small
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = hypersonicFlight
    partIcon = proceduralNoseCone
    techRequired = aerodynamicSystems
    title = Procedural NoseCone (medium)
    description = Procedural NoseCone medium
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = prototypeSpaceplanes
    partIcon = proceduralNoseCone
    techRequired = advAerodynamics
    title = Procedural NoseCone (large)
    description = Procedural NoseCone large
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = aerodynamicSystems
    partIcon = proceduralNoseCone
    techRequired = heavyAerodynamics
    title = Procedural NoseCone (unlimited)
    description = Procedural NoseCone unlimited
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = flightControl
    partIcon = proceduralHeatshield
    techRequired = landing
    title = Procedural Heatshield (medium)
    description = Procedural Heatshield small
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = earlyLanding
    partIcon = proceduralHeatshield
    techRequired = advLanding
    title = Procedural Heatshield (large)
    description = Procedural Heatshield maximum diameter is 3m
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = MassiveHeatshields
    partIcon = proceduralHeatshield
    techRequired = heavyLanding
    title = Procedural Heatshield (huge)
    description = Procedural Heatshield huge
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = advUnmanned
    partIcon = proceduralHeatshield
    techRequired = advancedMotors
    title = Procedural Heatshield (unlimited)
    description = Procedural Heatshield unlimited
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = Solids0625
    partIcon = proceduralTankSRB
    techRequired = soundingEnhancements2
    title = Procedural SRB (0.625)
    description = Procedural SRB (0.625)
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = Solids09375
    partIcon = proceduralTankSRB
    techRequired = basicRocketry
    title = Procedural SRB (0.9375)
    description = Procedural SRB (0.9375)
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = Solids125
    partIcon = proceduralTankSRB
    techRequired = generalRocketry
    title = Procedural SRB (1.25)
    description = Procedural SRB (1.25)
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = SoldisSML
    partIcon = proceduralTankSRB
    techRequired = advRocketry
    title = Procedural SRB (8M Length)
    description = Basic Procedural SRB (8M Length)
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = Soldis15
    partIcon = proceduralTankSRB
    techRequired = heavyRocketry
    title = Procedural SRB (1.5)
    description = General Procedural SRB (1.5)
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = Soldis1875
    partIcon = proceduralTankSRB
    techRequired = heavierRocketry
    title = Procedural SRB (1.875)
    description = Intermediate Procedural SRB (1.875)
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = Soldis20
    partIcon = proceduralTankSRB
    techRequired = rocketry7
    title = Procedural SRB (2.0)
    description = Advanced Procedural SRB (2.0)
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = Soldis30
    partIcon = proceduralTankSRB
    techRequired = veryHeavyRocketry
    title = Procedural SRB (3.0)
    description = Heavy Procedural SRB (3.0)
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = massivesolids
    partIcon = proceduralTankSRB
    techRequired = experimentalRocketry
    title = Procedural SRB (unlimited)
    description = Unlimited Procedural SRB (Unlimited)
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = ST125
    cumulativeCost = true
    partIcon = proceduralTankLiquid
    techRequired = basicConstruction
    title = Procedural Structural (1.25)
    description = Procedural Structural Max diameter 1.25
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = ST1875
    cumulativeCost = true
    partIcon = proceduralTankLiquid
    techRequired = generalConstruction
    title = Procedural Structural (1.875)
    description = Procedural Structural Max diameter 1.875
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = ST25
    cumulativeCost = true
    partIcon = proceduralTankLiquid
    techRequired = advConstruction
    title = Procedural Structural (2.5)
    description = Procedural Structural Max diameter 2.5
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = ST375
    cumulativeCost = true
    partIcon = proceduralTankLiquid
    techRequired = advMetalworks
    title = Procedural Structural (3.75)
    description = Procedural Structural Max diameter 3.75
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = ST5
    cumulativeCost = true
    partIcon = proceduralTankLiquid
    techRequired = nanolathing
    title = Procedural Structural (5.0)
    description = Procedural Structural Max diameter 5.0
    entryCost = 0    
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = STU
    cumulativeCost = true
    partIcon = proceduralTankLiquid
    techRequired = cuttingEdgeConstruction
    title = Procedural Structural (Unlimited)
    description = Procedural Structural Max diameter Unlimited
    entryCost = 0    
}

@PART[*]:HAS[@MODULE[ProceduralPart]]
{
	MODULE
	{
		name = ModuleTagNotRescaled
	}
}

@PART[*]:HAS[@MODULE[ProceduralShapeCone]]
{
    @MODULE[ProceduralShapeCone]
    {
        @techRequired = basicConstruction
    }

}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = basicdecoupler
    partIcon = proceduralStackDecoupler
    techRequired = basicConstruction
    title = Basic Procedural Stack Decoupler
    description = Basic Procedural Stack Decoupler
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = generalDecoupler
    partIcon = proceduralStackDecoupler
    techRequired = generalConstruction
    title = General Procedural Stack Decoupler
    description = A general-purpose procedural stack decoupler for basic construction needs.
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = advDecoupler
    partIcon = proceduralStackDecoupler
    techRequired = advConstruction
    title = Advanced Procedural Stack Decoupler
    description = An advanced procedural stack decoupler for enhanced construction techniques.
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = specializedDecoupler
    partIcon = proceduralStackDecoupler
    techRequired = specializedConstruction
    title = Specialized Procedural Stack Decoupler
    description = A specialized procedural stack decoupler for more complex construction requirements.
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = metalworksDecoupler
    partIcon = proceduralStackDecoupler
    techRequired = advMetalworks
    title = Metalworks Procedural Stack Decoupler
    description = A high-strength procedural stack decoupler designed for advanced metalwork applications.
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = nanoDecoupler
    partIcon = proceduralStackDecoupler
    techRequired = nanolathing
    title = Nanolathing Procedural Stack Decoupler
    description = A precision-engineered procedural stack decoupler for nanolathing technology.
}

PARTUPGRADE:NEEDS[ProceduralParts]
{
    name = futureDecoupler
    partIcon = proceduralStackDecoupler
    techRequired = nearFutureConstruction
    title = Near Future Procedural Stack Decoupler
    description = A cutting-edge procedural stack decoupler for near-future construction technologies.
}

@PART[*]:HAS[@MODULE[ProceduralShapePill]]
{
    @MODULE[ProceduralShapePill]
    {
        @techRequired = basicConstruction
    }

}
@PART[*]:HAS[@MODULE[ProceduralShapeBezierCone]]
{
    @MODULE[ProceduralShapeBezierCone]
    {
        @techRequired = basicConstruction
    }

}
  

@PART[proceduralTankLiquid|proceduralTankRealFuels]
{
 
    @MODULE[ProceduralPart]
    {
        @diameterMin = 0.325
        @diameterMax = 0.625
        @lengthMin = 0.325
        @lengthMax = 2
        @volumeMin = 0
        @volumeMax = Infinity
        
        -UPGRADES,* {} 
        
        UPGRADES {
            UPGRADE
            {
                name__ = sd625
                diameterMin = 0.325
                diameterMax = 0.625
                lengthMin = 0.625
                lengthMax = 3.0
            }
            UPGRADE
            {
                name__ = sd9375
                diameterMin = 0.325
                diameterMax = 0.9375
                lengthMin = 0.625
                lengthMax = 4.0
            }                           
            UPGRADE
            {
                name__ = sd125
                diameterMin = 0.325
                diameterMax = 1.25
                lengthMin = 0.625
                lengthMax = 5.0
            }          
            UPGRADE
            {
                name__ = sd1875
                diameterMin = 0.1
                lengthMin = 0.1
		diameterMax = 1.875
		lengthMax = 7.0

            }
            UPGRADE
            {
                name__ = sd25
                diameterMin = 0.1
                lengthMin = 0.1
		diameterMax = 2.5
		lengthMax = 8.0
            }            

            UPGRADE
            {
                name__ = sd375
                diameterMin = 0.1
                lengthMin = 0.1
		lengthMax = 10.0
		diameterMax = 3.75
            }
            UPGRADE
            {
                name__ = sd5
                diameterMin = 0.1
                lengthMin = 0.1
		lengthMax = Infinity
		diameterMax = 5.0
            }
            UPGRADE
            {
                name__ = sd75
                diameterMin = 0.1
                lengthMin = 0.1
		lengthMax = Infinity
		diameterMax = 7.5
            }
            UPGRADE
            {
                name__ = sdu
                diameterMin = 0.1
                lengthMin = 0.1
		lengthMax = Infinity
		diameterMax = Infinity
            }
        }
    }
}

@PART[proceduralStructural]
{
            
    @MODULE[ProceduralPart]
    {
 
        @diameterMin = 0.325
        @diameterMax = 0.625
        @lengthMax = 0.5
        @lengthMin = 0.2
        @volumeMin = 0
        @volumeMax = Infinity
        
         -UPGRADES,* {} 

        UPGRADES {
            UPGRADE
            {
                name__ = ST125
		diameterMax = 1.25
                diameterMin = 0.1	
                lengthMin = 0.1
            }
            UPGRADE
            {
                name__ = ST1875
                diameterMax = 1.875
            }
            UPGRADE
            {
                name__ = ST25
                diameterMax = 2.5
            }
            UPGRADE
            {
                name__ = ST375
                diameterMax = 3.75
            }
            UPGRADE
            {
                name__ = ST5
                diameterMax = 5
            }
            UPGRADE
            {
                name__ = STU
                diameterMax = Infinity
            }
        }
    }
}

@PART[proceduralTankOre]
{
             
    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {} 
        
        @diameterMin = 0.1
        @lengthMin = 0.1
        @volumeMin = 1.0
        
        UPGRADES
        {
           UPGRADE
            {
                name__ = basicLifeSupport
                diameterMax = 1.5
                lengthMax = 1.75
                volumeMax = 2.5
            }
            UPGRADE
            {
                name__ = improvedLifeSupport
                diameterMax = 3.5
                lengthMax = 5.0
                volumeMax = 15.0
            }
            UPGRADE
            {
                name__ = longTermLifeSupport
			    diameterMin = 0.01
    			diameterMax = Infinity
	    		lengthMin = 0.01
		    	lengthMax = Infinity
			    volumeMin = 0.01
    			volumeMax = Infinity
            }
        }
    }
}

@PART[proceduralTankRCS]
{
            
    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {}
        
        @diameterMin = 0.5
        @lengthMin = 0.3
        @volumeMin = 0.11
        
        UPGRADES
        {
            UPGRADE
            {
                name__ = materialsScienceAdvCapsules
                diameterMax = 2.5
                lengthMax = 2.0
                volumeMax = 5.0
            }
            UPGRADE
            {
                name__ = specializedConstruction
			    diameterMin = 0.01
    			diameterMax = Infinity
	    		lengthMin = 0.01
		    	lengthMax = Infinity
			    volumeMin = 0.01
    			volumeMax = Infinity
            }
        }
    }
}

@PART[proceduralTankXenon]
{
          
    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {}
        
        @diameterMin = 0.125
        @diameterMax = 0.75
        @lengthMin = 0.1
        @lengthMax = 0.75
        @volumeMin = 0.02
        @volumeMax = 0.2
        
        UPGRADES
        {
            UPGRADE
            {
                name__ = advancedElecPropulsion
                diameterMin = 0.01
                diameterMax = Infinity
                lengthMin = 0.01
                lengthMax = Infinity
                volumeMin = 0.01
                volumeMax = Infinity
            }
        }
    }
}

@PART[proceduralBattery]
{
    @MODULE[ProceduralShapeCone]
    {
        @techRequired = electrics
    }
    @MODULE[ProceduralShapePill]
    {
        @techRequired = advElectrics
    }
    @MODULE[ProceduralShapeBezierCone]
    {
        @techRequired = advElectrics
    }
        
    @MODULE[ProceduralPart]
    {
        @diameterMin = 0.1
        @diameterMax = 0.625
        @lengthMax = 0.1
        @lengthMin = 0.01
        @volumeMin = 0
        @volumeMax = Infinity
        
        -UPGRADES,* {}
        
        UPGRADES {
           UPGRADE
           {
                name__ = electronicsSatellite
                lengthMax = 0.4
            }
            UPGRADE
            {
                name__ = electronicsHuman
                diameterMax = 1.25
            }
            UPGRADE
            {
                name__ = miniaturization
                diameterMax = 1.875
                lengthMax = 0.5
            }
            UPGRADE
            {
                name__ = electronicsSpaceStation
                diameterMax = 2.5
                maxLength = 1
            }
            UPGRADE
            {
                name__ = spaceStationSolarPanels
                diameterMin = 0.01
                diameterMax = Infinity
                lengthMin = 0.01
                lengthMax = Infinity
                volumeMin = 0.001
            }
        }
    }
}

@PART[proceduralNoseCone]
{
              
    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {}
        
        UPGRADES
        {
            UPGRADE
            {
                name__ = supersonicFlight
                diameterMin = 0.125
                diameterMax = 1.875
                lengthMin = 0.125
                lengthMax = 2.5
            }
            UPGRADE
            {
                name__ = hypersonicFlight
                diameterMax = 2.5
                lengthMax = 3.5
            }
            UPGRADE
            {
                name__ = prototypeSpaceplanes
                diameterMax = 3.75
                lengthMax = 4.5
            }
            UPGRADE
            {
                name__ = aerodynamicSystems
                diameterMin = 0.01
                diameterMax = Infinity
                lengthMax = Infinity
            }
        }
    }
}

@PART[proceduralHeatshield]
{
         
    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {}
        
        UPGRADES
        {
            UPGRADE
            {
                name__ = flightControl
                diameterMin = 0.5
                diameterMax = 1.25
            }
            UPGRADE
            {
                name__ = earlyLanding
                diameterMax = 2.5
            }
            UPGRADE
            {
                name__ = MassiveHeatshields
                diameterMax = 3.5
            }
            UPGRADE 
            {
                name__ = advUnmanned
                diameterMin = 0.01
                diameterMax = Infinity
                lengthMin = 0.1
                lengthMax = Infinity
                volumeMin = 0.01
                volumeMax = Infinity
            }
		}
    }
}

@PART[proceduralTankSRB|proceduralSRBRealFuels]
{

    @MODULE[ProceduralPart]
    {
        -UPGRADES,* {}
 		
        @diameterMin = 0.325
        @diameterMax = 0.625
        @lengthMin = 1.0
        @lengthMax = 1.5
        @volumeMin = 0
 	@volumeMax = Infinity
		
 	UPGRADES
 	{
            UPGRADE
            {
                name__ = Solids0625
                diameterMax = 0.625
                lengthMax = 2.5
            }            
            UPGRADE
            {
                name__ = Solids09375
                diameterMax = 0.9375
                lengthMax = 4.0
            }
            UPGRADE
            {
                name__ = Solids125
                diameterMax = 1.25
                lengthMax = 4.0
            }
            UPGRADE
            {
                name__ = SoldisSML
                diameterMin = 0.02
                lengthMin = 0.1
                lengthMax = 8.0
            }
            UPGRADE
            {
                name__ = Soldis15
                diameterMax = 1.5
                lengthMax = 10.0
            }
            UPGRADE
            {
                name__ = Soldis1875
                diameterMax = 1.875
                lengthMax = 12.0
            }
            UPGRADE
            {
                name__ = Soldis20
                diameterMax = 2.0
                lengthMax = 12.0
            }
            UPGRADE
            {
                name__ = Soldis30
                diameterMax = 3.0
            }
            UPGRADE 
            {
                name__ = massivesolids
                diameterMin = 0.01
                diameterMax = Infinity
                lengthMin = 0.1
                lengthMax = Infinity
            }
        }
    }
}

@PART[proceduralStackDecoupler]
{
   @MODULE[ProceduralPart]
    {
        -UPGRADES,* {}
       
        UPGRADES
        {
            UPGRADE
           {
                name__ = basicdecoupler
                diameterMin = 0.325
                diameterMax = 1.25
            }
           UPGRADE
           {
                name__ = generalDecoupler
                diameterMax = 1.875
            }
           UPGRADE
            {
                name__ = advDecoupler
                diameterMax = 1.875
            }
            UPGRADE
            {
                name__ = specializedDecoupler
                diameterMax = 2.5
            }
           UPGRADE
            {
                name__ = metalworksDecoupler
                diameterMax = 3.5
            }
            UPGRADE
            {
               name__ = nanoDecoupler
                diameterMax = 5.0
            }
            UPGRADE
            {
                name__ = futureDecoupler
                diameterMax = Infinity
            }
        }
   }
    MODULE[DecouplerTweaker]
    {
        @separatorTechRequired = generalConstruction
    }
}


