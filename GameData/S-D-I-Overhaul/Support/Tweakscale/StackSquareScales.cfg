//SCALETYPE
//{
//    name = free_stack_USII
//    freeScale = true
//    defaultScale = 1.0
//    suffix = m
//    scaleFactors = 1.5
//    TWEAKSCALEEXPONENTS { mass = 2 }
//}

SCALETYPE
{
    name = USstack_square_0625
    freeScale = false
    defaultScale = 0.625
    suffix = m
    scaleFactors   = 0.625, 0.9375
    TWEAKSCALEEXPONENTS { mass = 2 }
}

SCALETYPE
{
    name = USstack_square_125
    freeScale = false
    defaultScale = 1.25
    suffix = m
    scaleFactors   = 1.25, 1.5, 1.875
    TWEAKSCALEEXPONENTS { mass = 2 }
}

SCALETYPE
{
    name = USstack_square_1875
    freeScale = false
    defaultScale = 1.875
    suffix = m
    scaleFactors   = 1.875, 2.5
    TWEAKSCALEEXPONENTS { mass = 2 }
}

SCALETYPE
{
    name = USstack_square_25
    freeScale = false
    defaultScale = 2.5
    suffix = m
    scaleFactors   = 2.5, 3.75
    TWEAKSCALEEXPONENTS { mass = 2 }
}

SCALETYPE
{
    name = free_USII
    freeScale = true
    defaultScale = 100
    suffix = %
    scaleFactors = 100, 150, 175
    TWEAKSCALEEXPONENTS { mass = 2 }
}


// Apply appropriate SCALETYPE to Cylindrical Shrouds

@PART[USCylindricalShroud0625]:After[TweakScale]
{ 
    !MODULE[TweakScale] {}  // Remove any existing TweakScale module
    
    %MODULE[TweakScale]
    {
        type = USstack_square_0625
    }

    MODULE
    {
        name = ModuleTagNotRescaled
    }
}

@PART[USQuadcore|USAdaptorShroud1250Vostok|USAdaptorShroud1250Soyuz]:After[TweakScale]
{ 
    !MODULE[TweakScale] {}  // Remove any existing TweakScale module
    
    %MODULE[TweakScale]
    {
        type = USstack_square_125
    }

    MODULE
    {
        name = ModuleTagNotRescaled
    }
}

@PART[USPenticore|USAdaptorShroud1875]:After[TweakScale]
{ 
    !MODULE[TweakScale] {}  // Remove any existing TweakScale module
    
    %MODULE[TweakScale]
    {
        type = USstack_square_1875
    }

    MODULE
    {
        name = ModuleTagNotRescaled
    }
}

@PART[USCylindricalShroud250|USOctocore]:After[TweakScale]
{ 
    !MODULE[TweakScale] {}  // Remove any existing TweakScale module
    
    %MODULE[TweakScale]
    {
        type = USstack_square_25
    }

    MODULE
    {
        name = ModuleTagNotRescaled
    }
}

// Decouplers and stack separators
//@PART[*]:HAS[@MODULE[ModuleDecouple]]:After[TweakScale] // All decouplers and stack separators
//{
//    !MODULE[TweakScale] {}  // Remove any existing TweakScale module
//    
//    %MODULE[TweakScale]
//    {
//        type = free_USII
//    }
//
//    MODULE
//    {
//        name = ModuleTagNotRescaled
//    }
//}

// Additional Power Sources (Batteries| Fuel Cells| RTG)
@PART[USBatteryWedge|USFuelCellMedium|USFuelCellSmall|USRTGWedge]:After[TweakScale]
{
    !MODULE[TweakScale]  // Remove any existing TweakScale module    
    
    %MODULE[TweakScale]
    {
        type = free_USII
    }

    MODULE
    {
        name = ModuleTagNotRescaled
    }
}

// Cargo Storage and Life Support
@PART[USCargoStorageWedge|USHydrazineWedge|USAerozineWedge|USCarbonDioxideWedge|USFoodWedge|USWaterWedge|USOxygenWedge|USSolidWasteWedge|USHydrogenWedge|USElektron|USComboLifesupportWedge|USGreyWaterWedge|USWaterPurifier|USRadialTanks|USSabatier]:After[TweakScale]
{
    !MODULE[TweakScale]  // Remove any existing TweakScale module    
   
    %MODULE[TweakScale]
    {
        type = free_USII
    }

    MODULE
    {
        name = ModuleTagNotRescaled
    }
}

@PART[USCylindricalShroud125ResizedTo1875-1|USAdaptorShroud1500|USAdaptorShroud1250|USCylindricalShroud125ResizedTo1875-1|USCylindricalShroud1500]:After[TweakScale]
{ 
    !MODULE[TweakScale] {}  // Remove any existing TweakScale module
    
    MODULE
    {
        name = ModuleTagNotRescaled
    }
}


// Fairings
//@PART[*]:HAS[@MODULE[ModuleProceduralFairing]]:After[TweakScale] // All fairings
//{
//    !MODULE[TweakScale] {}  // Remove any existing TweakScale module
//    
//    %MODULE[TweakScale]
//   {
//        type = free_USII
//    }
//
//    MODULE
//    {
//       name = ModuleTagNotRescaled
//    }
//}
